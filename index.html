<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Bundle | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–∫–æ–Ω–æ–∫ –¥–ª—è –≤–µ–±–∞</title>

    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–æ–≤ –∏–∫–æ–Ω–æ–∫ –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <!-- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π PWA manifest (–≤ –≤–∏–¥–µ JSON –≤ —Ç–µ–≥–µ) -->
    <!--
    {
      "name": "Icon Bundle",
      "short_name": "IconBundle",
      "description": "–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–æ–≤ –∏–∫–æ–Ω–æ–∫ –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤",
      "start_url": "/",
      "display": "standalone",
      "background_color": "#1a1a2e",
      "theme_color": "#1a1a2e",
      "icons": []
    }
    -->

    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé®</text></svg>">
</head>

<body>
    <div class="container">
        <header class="header">
            <h1><span class="icon">üé®</span> Icon Bundle</h1>
            <p class="subtitle">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–∞–±–æ—Ä–æ–≤ –∏–∫–æ–Ω–æ–∫ –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</p>
        </header>

        <main class="main-content">
            <section class="upload-section">
                <div class="drop-zone" id="dropZone">
                    <div class="drop-content">
                        <div class="upload-icon">üìÅ</div>
                        <h3>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—é–¥–∞</h3>
                        <p>–∏–ª–∏</p>
                        <button class="btn btn-primary" id="uploadBtn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</button>
                        <input type="file" id="fileInput" accept="image/*" style="display: none;">
                        <p class="file-info">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: PNG, JPG, SVG, WebP</p>
                    </div>
                </div>

                <div class="preview-section" id="previewSection" style="display: none;">
                    <h3>–ò—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</h3>
                    <div class="preview-container">
                        <img id="originalPreview" class="preview-img" alt="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä">
                        <div class="preview-info">
                            <p><strong>–†–∞–∑–º–µ—Ä:</strong> <span id="originalSize">-</span></p>
                            <p><strong>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:</strong> <span id="originalDimensions">-</span></p>
                            <p><strong>–§–æ—Ä–º–∞—Ç:</strong> <span id="originalFormat">-</span></p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="settings-section">
                <h2><span class="icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h2>

                <div class="settings-grid">
                    <div class="setting-group">
                        <h3>–¢–∏–ø–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –≤–µ–±–∞</h3>
                        <div class="checklist" id="sizeChecklist">
                            <!-- –°–ø–∏—Å–æ–∫ —Ä–∞–∑–º–µ—Ä–æ–≤ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏</h3>
                        <div class="options">
                            <label class="checkbox">
                                <input type="checkbox" id="generateFavicon" checked>
                                <span>–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å favicon –Ω–∞–±–æ—Ä (16x16, 32x32, 48x48)</span>
                            </label>
                            <label class="checkbox">
                                <input type="checkbox" id="generateAppleTouch" checked>
                                <span>–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Apple Touch –∏–∫–æ–Ω–∫–∏ (180x180)</span>
                            </label>
                            <label class="checkbox">
                                <input type="checkbox" id="generateAndroid" checked>
                                <span>–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Android –∏–∫–æ–Ω–∫–∏ (192x192, 512x512)</span>
                            </label>
                            <label class="checkbox">
                                <input type="checkbox" id="optimizeImages" checked>
                                <span>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å–∂–∞—Ç–∏–µ)</span>
                            </label>
                            <label class="checkbox">
                                <input type="checkbox" id="addPadding">
                                <span>–î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã (10%)</span>
                            </label>
                            <label class="checkbox">
                                <input type="checkbox" id="generateMultipleFormats">
                                <span>–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (PNG + WebP + JPEG)</span>
                            </label>
                        </div>
                    </div>

                    <div class="setting-group">
                        <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã</h3>
                        <div class="custom-sizes">
                            <div class="custom-size-input">
                                <input type="number" id="customWidth" placeholder="–®–∏—Ä–∏–Ω–∞" min="16" max="2048">
                                <span>√ó</span>
                                <input type="number" id="customHeight" placeholder="–í—ã—Å–æ—Ç–∞" min="16" max="2048">
                                <button class="btn btn-secondary" id="addCustomSize">–î–æ–±–∞–≤–∏—Ç—å</button>
                            </div>
                            <div class="custom-sizes-list" id="customSizesList"></div>
                        </div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary btn-large" id="generateBtn" disabled>
                        <span class="icon">‚ú®</span> –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä –∏–∫–æ–Ω–æ–∫
                    </button>
                    <button class="btn btn-secondary" id="selectAllBtn">
                        <span class="icon">‚úÖ</span> –í—ã–±—Ä–∞—Ç—å –≤—Å–µ —Ä–∞–∑–º–µ—Ä—ã
                    </button>
                    <button class="btn btn-secondary" id="clearAllBtn">
                        <span class="icon">üóëÔ∏è</span> –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
                    </button>
                </div>
            </section>

            <section class="output-section" id="outputSection" style="display: none;">
                <h2><span class="icon">üì¶</span> –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∫–æ–Ω–∫–∏</h2>
                <div class="output-info">
                    <p>–ò–∫–æ–Ω–∫–∏ –≥–æ—Ç–æ–≤—ã –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ
                        –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤—Å–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –≤ ZIP-–∞—Ä—Ö–∏–≤–µ.</p>
                </div>
                <div class="icons-grid" id="iconsGrid">
                    <!-- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å -->
                </div>
                <div class="download-all">
                    <button class="btn btn-primary btn-large" id="downloadAllBtn">
                        <span class="icon">üì•</span> –°–∫–∞—á–∞—Ç—å –≤—Å–µ –∏–∫–æ–Ω–∫–∏ (ZIP)
                    </button>
                    <p class="hint">–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –±—É–¥—É—Ç —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ –æ–¥–∏–Ω ZIP-–∞—Ä—Ö–∏–≤</p>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>Icon Bundle v1.0 ‚Ä¢ –î–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤</p>
            <p>–†–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Ä¢ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ</p>
            <br>
            <hr>
            <br>
            <p>
                –ë–æ–Ω—É—Å! –ü–æ–ª—É—á–∏—Ç–µ 500‚ÇΩ –∑–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –ê–ª—å—Ñ–∞-–ö–∞—Ä—Ç—ã –ø–æ —Å—Å—ã–ª–∫–µ –∏ –¥–æ 100% —Å—É–ø–µ—Ä–∫—ç—à–±—ç–∫–∞:
            </p>
            <p>
                –ê–ª—å—Ñ–∞-–ö–∞—Ä—Ç–∞ ‚Äî —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ,
                –∫—ç—à–±—ç–∫ –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü –∏ –º–Ω–æ–≥–æ –∫–ª–∞—Å—Å–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –æ—Ç –Ω–∞—à–∏—Ö
                –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ ‚ù§Ô∏è
            </p>
            <p>
                <a href="https://alfa.me/svHUex" target="_blank" rel="nofollow noopener"
                    style="font-size: 0.75em; color: #ffffff;">
                    –û—Ñ–æ—Ä–º–∏—Ç–µ –ê–ª—å—Ñ–∞-–ö–∞—Ä—Ç—É –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ –ø–æ–ª—É—á–∏—Ç–µ 500‚ÇΩ –∏ —Å—É–ø–µ—Ä–∫—ç—à–±—ç–∫!
                </a>
            </p>
        </footer>
    </div>

    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∫–æ–Ω–æ–∫...</p>
            <p class="loading-detail" id="loadingDetail"></p>
        </div>
    </div>

    <style>
        :root {
            /* –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞) */
            --color-bg: #0f0f1a;
            --color-surface: #1a1a2e;
            --color-surface-light: #2a2a3e;
            --color-primary: #6c63ff;
            --color-primary-light: #8a84ff;
            --color-secondary: #ff6584;
            --color-text: #e2e2e2;
            --color-text-secondary: #a0a0c0;
            --color-border: #33334d;
            --color-success: #4caf50;
            --color-warning: #ff9800;
            --color-error: #f44336;

            /* –¢–µ–Ω–∏ */
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);

            /* –°–∫—Ä—É–≥–ª–µ–Ω–∏—è */
            --radius-sm: 6px;
            --radius-md: 12px;
            --radius-lg: 20px;

            /* –û—Ç—Å—Ç—É–ø—ã */
            --space-xs: 8px;
            --space-sm: 12px;
            --space-md: 16px;
            --space-lg: 24px;
            --space-xl: 32px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--color-bg);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--space-lg);
        }

        /* –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏—è */
        h1,
        h2,
        h3 {
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: var(--space-sm);
        }

        h1 {
            font-size: 2.5rem;
            color: var(--color-primary-light);
        }

        h2 {
            font-size: 1.8rem;
            margin-top: var(--space-xl);
            margin-bottom: var(--space-md);
        }

        h3 {
            font-size: 1.2rem;
            color: var(--color-text);
        }

        p {
            margin-bottom: var(--space-sm);
        }

        .subtitle {
            color: var(--color-text-secondary);
            font-size: 1.1rem;
        }

        .icon {
            margin-right: var(--space-xs);
        }

        /* –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã */
        .header {
            text-align: center;
            padding: var(--space-xl) 0;
            border-bottom: 1px solid var(--color-border);
            margin-bottom: var(--space-xl);
        }

        .section {
            background: var(--color-surface);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-sm);
        }

        .upload-section {
            background: var(--color-surface);
            border-radius: var(--radius-md);
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-sm);
        }

        .drop-zone {
            border: 3px dashed var(--color-border);
            border-radius: var(--radius-lg);
            padding: var(--space-xl);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: var(--space-lg);
        }

        .drop-zone:hover {
            border-color: var(--color-primary);
            background: var(--color-surface-light);
        }

        .drop-zone.dragover {
            border-color: var(--color-primary);
            background: var(--color-surface-light);
            transform: scale(1.01);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: var(--space-md);
        }

        .file-info {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            margin-top: var(--space-md);
        }

        .preview-section {
            margin-top: var(--space-xl);
        }

        .preview-container {
            display: flex;
            gap: var(--space-lg);
            align-items: center;
            background: var(--color-surface-light);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-top: var(--space-md);
        }

        .preview-img {
            max-width: 200px;
            max-height: 200px;
            border-radius: var(--radius-sm);
            object-fit: contain;
            border: 2px solid var(--color-border);
        }

        .preview-info {
            flex: 1;
        }

        .preview-info p {
            margin-bottom: var(--space-xs);
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: var(--space-sm) var(--space-lg);
            border: none;
            border-radius: var(--radius-sm);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-xs);
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: var(--color-primary-light);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--color-surface-light);
            color: var(--color-text);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            background: var(--color-border);
            transform: translateY(-1px);
        }

        .btn-large {
            padding: var(--space-md) var(--space-xl);
            font-size: 1.1rem;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ */
        .settings-section {
            background: var(--color-surface);
            border-radius: var(--radius-md);
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-sm);
        }

        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-xl);
            margin-bottom: var(--space-xl);
        }

        .setting-group {
            background: var(--color-surface-light);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
        }

        .checklist {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: var(--space-sm);
            margin-top: var(--space-md);
        }

        .checkbox {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            margin-bottom: var(--space-sm);
            cursor: pointer;
            padding: var(--space-xs);
            border-radius: var(--radius-sm);
            transition: background 0.2s ease;
        }

        .checkbox:hover {
            background: rgba(108, 99, 255, 0.1);
        }

        .checkbox input {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .size-checkbox {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-sm);
            background: var(--color-bg);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .size-checkbox:hover {
            background: var(--color-border);
        }

        .size-checkbox.selected {
            background: var(--color-primary);
            color: white;
        }

        .size-checkbox input {
            margin-right: var(--space-xs);
        }

        /* –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–∞–∑–º–µ—Ä—ã */
        .custom-size-input {
            display: flex;
            gap: var(--space-sm);
            align-items: center;
            margin-bottom: var(--space-md);
        }

        .custom-size-input input {
            padding: var(--space-sm);
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            color: var(--color-text);
            width: 100px;
        }

        .custom-sizes-list {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .custom-size-tag {
            background: var(--color-primary);
            color: white;
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            gap: var(--space-xs);
        }

        .custom-size-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
            padding: 0 4px;
        }

        /* –î–µ–π—Å—Ç–≤–∏—è */
        .action-buttons {
            display: flex;
            gap: var(--space-md);
            flex-wrap: wrap;
            justify-content: center;
        }

        /* –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ */
        .output-section {
            background: var(--color-surface);
            border-radius: var(--radius-md);
            padding: var(--space-xl);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-sm);
        }

        .output-info {
            background: var(--color-surface-light);
            border-radius: var(--radius-md);
            padding: var(--space-lg);
            margin-bottom: var(--space-lg);
        }

        .icons-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: var(--space-lg);
            margin: var(--space-lg) 0;
        }

        .icon-card {
            background: var(--color-surface-light);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            text-align: center;
            transition: transform 0.2s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .icon-card:hover {
            transform: translateY(-4px);
            border-color: var(--color-primary);
            box-shadow: var(--shadow-md);
        }

        .icon-preview {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: var(--space-sm);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            background: white;
        }

        .icon-info {
            font-size: 0.9rem;
        }

        .icon-info .size {
            font-weight: bold;
            color: var(--color-primary-light);
        }

        .download-all {
            text-align: center;
            margin-top: var(--space-xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--color-border);
        }

        .hint {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            margin-top: var(--space-sm);
        }

        /* –§—É—Ç–µ—Ä */
        .footer {
            text-align: center;
            padding: var(--space-lg);
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--color-border);
            margin-top: var(--space-xl);
        }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(15, 15, 26, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .loading-content {
            text-align: center;
            background: var(--color-surface);
            padding: var(--space-xl);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid var(--color-border);
            border-top-color: var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--space-lg);
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .loading-detail {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            margin-top: var(--space-sm);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: var(--space-md);
            }

            h1 {
                font-size: 2rem;
            }

            .settings-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .preview-container {
                flex-direction: column;
                text-align: center;
            }

            .custom-size-input {
                flex-wrap: wrap;
            }

            .custom-size-input input {
                flex: 1;
                min-width: 80px;
            }
        }

        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã */
        .success {
            color: var(--color-success);
        }

        .error {
            color: var(--color-error);
        }

        .warning {
            color: var(--color-warning);
        }

        .hidden {
            display: none !important;
        }
    </style>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').then(() => {
                console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
            });
        }
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –¥–ª—è –≤–µ–±–∞
        const STANDARD_SIZES = [
            { width: 16, height: 16, label: 'Favicon (16x16)', category: 'favicon' },
            { width: 32, height: 32, label: 'Favicon 32x32', category: 'favicon' },
            { width: 48, height: 48, label: 'Favicon 48x48', category: 'favicon' },
            { width: 64, height: 64, label: '64x64', category: 'small' },
            { width: 96, height: 96, label: '96x96', category: 'small' },
            { width: 128, height: 128, label: '128x128', category: 'medium' },
            { width: 180, height: 180, label: 'Apple Touch (180x180)', category: 'apple' },
            { width: 192, height: 192, label: 'Android 192x192', category: 'android' },
            { width: 256, height: 256, label: '256x256', category: 'medium' },
            { width: 384, height: 384, label: '384x384', category: 'large' },
            { width: 512, height: 512, label: 'Android 512x512', category: 'android' },
            { width: 1024, height: 1024, label: '1024x1024', category: 'large' }
        ];

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const state = {
            originalImage: null,
            originalFile: null,
            selectedSizes: new Set([16, 32, 48, 180, 192, 512]),
            customSizes: [],
            generatedIcons: []
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const fileInput = document.getElementById('fileInput');
        const uploadBtn = document.getElementById('uploadBtn');
        const dropZone = document.getElementById('dropZone');
        const previewSection = document.getElementById('previewSection');
        const originalPreview = document.getElementById('originalPreview');
        const originalSize = document.getElementById('originalSize');
        const originalDimensions = document.getElementById('originalDimensions');
        const originalFormat = document.getElementById('originalFormat');
        const sizeChecklist = document.getElementById('sizeChecklist');
        const generateBtn = document.getElementById('generateBtn');
        const selectAllBtn = document.getElementById('selectAllBtn');
        const clearAllBtn = document.getElementById('clearAllBtn');
        const outputSection = document.getElementById('outputSection');
        const iconsGrid = document.getElementById('iconsGrid');
        const downloadAllBtn = document.getElementById('downloadAllBtn');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const loadingDetail = document.getElementById('loadingDetail');
        const customWidth = document.getElementById('customWidth');
        const customHeight = document.getElementById('customHeight');
        const addCustomSizeBtn = document.getElementById('addCustomSize');
        const customSizesList = document.getElementById('customSizesList');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function init() {
            renderSizeChecklist();
            setupEventListeners();
        }

        // –†–µ–Ω–¥–µ—Ä —á–µ–∫-–ª–∏—Å—Ç–∞ —Ä–∞–∑–º–µ—Ä–æ–≤
        function renderSizeChecklist() {
            sizeChecklist.innerHTML = '';

            STANDARD_SIZES.forEach(size => {
                const sizeId = `${size.width}x${size.height}`;
                const checkbox = document.createElement('label');
                checkbox.className = 'size-checkbox';
                if (state.selectedSizes.has(size.width) && state.selectedSizes.has(size.height)) {
                    checkbox.classList.add('selected');
                }

                checkbox.innerHTML = `
                    <input type="checkbox" 
                           data-width="${size.width}" 
                           data-height="${size.height}"
                           ${state.selectedSizes.has(size.width) ? 'checked' : ''}>
                    <span>${size.label}</span>
                `;

                checkbox.querySelector('input').addEventListener('change', (e) => {
                    toggleSizeSelection(size.width, size.height, e.target.checked);
                    renderSizeChecklist();
                });

                sizeChecklist.appendChild(checkbox);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
        function updateCustomSizesList() {
            customSizesList.innerHTML = '';

            state.customSizes.forEach((size, index) => {
                const tag = document.createElement('div');
                tag.className = 'custom-size-tag';
                tag.innerHTML = `
                    <span>${size.width}√ó${size.height}</span>
                    <button onclick="removeCustomSize(${index})">√ó</button>
                `;
                customSizesList.appendChild(tag);
            });
        }

        window.removeCustomSize = function (index) {
            state.customSizes.splice(index, 1);
            updateCustomSizesList();
        };

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–º–µ—Ä–∞
        function toggleSizeSelection(width, height, selected) {
            const key = `${width}x${height}`;
            if (selected) {
                state.selectedSizes.add(width);
                state.selectedSizes.add(height);
            } else {
                state.selectedSizes.delete(width);
                state.selectedSizes.delete(height);
            }
            updateGenerateButton();
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            uploadBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);

            dropZone.addEventListener('click', (e) => {
                if (e.target === dropZone || e.target.classList.contains('drop-content')) {
                    fileInput.click();
                }
            });

            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });

            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, highlight, false);
            });

            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, unhighlight, false);
            });

            dropZone.addEventListener('drop', handleDrop, false);

            generateBtn.addEventListener('click', generateIcons);
            selectAllBtn.addEventListener('click', selectAllSizes);
            clearAllBtn.addEventListener('click', clearAllSizes);
            downloadAllBtn.addEventListener('click', downloadAllIcons);

            addCustomSizeBtn.addEventListener('click', addCustomSize);

            // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –æ–ø—Ü–∏–π
            document.getElementById('generateFavicon').addEventListener('change', updateSizesFromOptions);
            document.getElementById('generateAppleTouch').addEventListener('change', updateSizesFromOptions);
            document.getElementById('generateAndroid').addEventListener('change', updateSizesFromOptions);
        }

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        function highlight() {
            dropZone.classList.add('dragover');
        }

        function unhighlight() {
            dropZone.classList.remove('dragover');
        }

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            handleFiles(files);
        }

        function handleFileSelect(e) {
            const files = e.target.files;
            handleFiles(files);
        }

        function handleFiles(files) {
            if (!files.length) return;

            const file = files[0];
            if (!file.type.match('image.*')) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ');
                return;
            }

            state.originalFile = file;

            const reader = new FileReader();
            reader.onload = (e) => {
                state.originalImage = new Image();
                state.originalImage.onload = () => {
                    displayPreview();
                };
                state.originalImage.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function displayPreview() {
            originalPreview.src = state.originalImage.src;
            originalSize.textContent = formatFileSize(state.originalFile.size);
            originalDimensions.textContent = `${state.originalImage.width}√ó${state.originalImage.height}`;
            originalFormat.textContent = state.originalFile.type.split('/')[1].toUpperCase();

            previewSection.style.display = 'block';
            dropZone.style.display = 'none';
            updateGenerateButton();
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        function updateGenerateButton() {
            generateBtn.disabled = !state.originalImage || state.selectedSizes.size === 0;
        }

        function updateSizesFromOptions() {
            const faviconChecked = document.getElementById('generateFavicon').checked;
            const appleChecked = document.getElementById('generateAppleTouch').checked;
            const androidChecked = document.getElementById('generateAndroid').checked;

            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —á–µ–∫–±–æ–∫—Å–æ–≤
            STANDARD_SIZES.forEach(size => {
                if (size.category === 'favicon') {
                    toggleSizeSelection(size.width, size.height, faviconChecked);
                } else if (size.category === 'apple') {
                    toggleSizeSelection(size.width, size.height, appleChecked);
                } else if (size.category === 'android') {
                    toggleSizeSelection(size.width, size.height, androidChecked);
                }
            });

            renderSizeChecklist();
        }

        function selectAllSizes() {
            STANDARD_SIZES.forEach(size => {
                state.selectedSizes.add(size.width);
                state.selectedSizes.add(size.height);
            });
            renderSizeChecklist();
            updateGenerateButton();
        }

        function clearAllSizes() {
            state.selectedSizes.clear();
            renderSizeChecklist();
            updateGenerateButton();
        }

        function addCustomSize() {
            const width = parseInt(customWidth.value);
            const height = parseInt(customHeight.value);

            if (!width || !height || width < 16 || height < 16 || width > 2048 || height > 2048) {
                alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã (–æ—Ç 16 –¥–æ 2048)');
                return;
            }

            state.customSizes.push({ width, height });
            state.selectedSizes.add(width);
            state.selectedSizes.add(height);

            customWidth.value = '';
            customHeight.value = '';

            updateCustomSizesList();
            renderSizeChecklist();
            updateGenerateButton();
        }

        async function generateIcons() {
            if (!state.originalImage) return;

            showLoading(true);
            state.generatedIcons = [];

            const allSizes = [];

            STANDARD_SIZES.forEach(size => {
                if (state.selectedSizes.has(size.width)) {
                    allSizes.push(size);
                }
            });

            state.customSizes.forEach(size => {
                allSizes.push({
                    width: size.width,
                    height: size.height,
                    label: `${size.width}√ó${size.height} (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π)`,
                    category: 'custom'
                });
            });

            for (let i = 0; i < allSizes.length; i++) {
                const size = allSizes[i];
                loadingDetail.textContent = `–ì–µ–Ω–µ—Ä–∞—Ü–∏—è ${size.width}√ó${size.height} (${i + 1}/${allSizes.length})`;

                try {
                    const formatsData = await generateIcon(size);
                    const formats = [];

                    formatsData.forEach(formatData => {
                        formats.push({
                            ...formatData,
                            blob: dataURLToBlob(formatData.dataUrl)
                        });
                    });

                    state.generatedIcons.push({
                        ...size,
                        formats: formats
                    });
                } catch (error) {
                    console.error(`–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ${size.width}√ó${size.height}:`, error);
                }
            }

            showLoading(false);
            displayGeneratedIcons();
        }
        function generateIcon(size) {
            return new Promise((resolve, reject) => {
                const canvas = document.createElement('canvas');
                canvas.width = size.width;
                canvas.height = size.height;

                const ctx = canvas.getContext('2d');

                // –û—á–∏—â–∞–µ–º canvas
                ctx.clearRect(0, 0, size.width, size.height);

                // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                let drawWidth = size.width;
                let drawHeight = size.height;
                let offsetX = 0;
                let offsetY = 0;

                if (document.getElementById('addPadding').checked) {
                    const padding = 0.1; // 10% –æ—Ç—Å—Ç—É–ø–æ–≤
                    drawWidth = size.width * (1 - padding * 2);
                    drawHeight = size.height * (1 - padding * 2);
                    offsetX = (size.width - drawWidth) / 2;
                    offsetY = (size.height - drawHeight) / 2;
                }

                // –†–∏—Å—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–π
                const imgAspect = state.originalImage.width / state.originalImage.height;
                const canvasAspect = drawWidth / drawHeight;

                let renderWidth, renderHeight, renderX, renderY;

                if (imgAspect > canvasAspect) {
                    renderWidth = drawWidth;
                    renderHeight = drawWidth / imgAspect;
                    renderX = offsetX;
                    renderY = offsetY + (drawHeight - renderHeight) / 2;
                } else {
                    renderHeight = drawHeight;
                    renderWidth = drawHeight * imgAspect;
                    renderX = offsetX + (drawWidth - renderWidth) / 2;
                    renderY = offsetY;
                }

                // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';

                // –†–∏—Å—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                ctx.drawImage(
                    state.originalImage,
                    renderX, renderY, renderWidth, renderHeight
                );

                // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                let quality = 1.0;
                if (document.getElementById('optimizeImages').checked) {
                    quality = 0.8; // –°–Ω–∏–∂–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞
                }

                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
                const generateMultiple = document.getElementById('generateMultipleFormats').checked;

                if (generateMultiple) {
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–∫–æ–Ω–∫–∏ –≤–æ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
                    const formats = [];

                    // PNG (–≤—Å–µ–≥–¥–∞)
                    formats.push({
                        format: 'png',
                        dataUrl: canvas.toDataURL('image/png', quality),
                        mime: 'image/png',
                        extension: 'png'
                    });

                    // WebP (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
                    if (canvas.toDataURL('image/webp').indexOf('image/webp') !== -1) {
                        formats.push({
                            format: 'webp',
                            dataUrl: canvas.toDataURL('image/webp', quality),
                            mime: 'image/webp',
                            extension: 'webp'
                        });
                    }

                    // JPEG (—Å –±–µ–ª—ã–º —Ñ–æ–Ω–æ–º –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
                    const jpegCanvas = document.createElement('canvas');
                    jpegCanvas.width = size.width;
                    jpegCanvas.height = size.height;
                    const jpegCtx = jpegCanvas.getContext('2d');

                    // –ó–∞–ø–æ–ª–Ω—è–µ–º –±–µ–ª—ã–º —Ñ–æ–Ω–æ–º –¥–ª—è JPEG
                    jpegCtx.fillStyle = '#FFFFFF';
                    jpegCtx.fillRect(0, 0, size.width, size.height);

                    // –ö–æ–ø–∏—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                    jpegCtx.drawImage(canvas, 0, 0);

                    formats.push({
                        format: 'jpeg',
                        dataUrl: jpegCanvas.toDataURL('image/jpeg', quality),
                        mime: 'image/jpeg',
                        extension: 'jpg'
                    });

                    resolve(formats);
                } else {
                    // –¢–æ–ª—å–∫–æ PNG –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                    resolve([{
                        format: 'png',
                        dataUrl: canvas.toDataURL('image/png', quality),
                        mime: 'image/png',
                        extension: 'png'
                    }]);
                }
            });
        }

        function dataURLToBlob(dataURL) {
            const arr = dataURL.split(',');
            const mime = arr[0].match(/:(.*?);/)[1];
            const bstr = atob(arr[1]);
            let n = bstr.length;
            const u8arr = new Uint8Array(n);

            while (n--) {
                u8arr[n] = bstr.charCodeAt(n);
            }

            return new Blob([u8arr], { type: mime });
        }

        function displayGeneratedIcons() {
            iconsGrid.innerHTML = '';

            state.generatedIcons.forEach((icon, iconIndex) => {
                // icon.formats —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ —Ñ–æ—Ä–º–∞—Ç–æ–≤
                icon.formats.forEach((format, formatIndex) => {
                    const card = document.createElement('div');
                    card.className = 'icon-card';
                    card.innerHTML = `
                <img src="${format.dataUrl}" alt="${icon.label}" class="icon-preview">
                <div class="icon-info">
                    <div class="size">${icon.width}√ó${icon.height}</div>
                    <div>${icon.label}</div>
                    <div class="format">${format.format.toUpperCase()}</div>
                    <div class="file-size">${formatFileSize(format.blob.size)}</div>
                </div>
            `;

                    card.addEventListener('click', () => downloadIcon(icon, iconIndex, format));
                    iconsGrid.appendChild(card);
                });
            });

            outputSection.style.display = 'block';
            outputSection.scrollIntoView({ behavior: 'smooth' });
        }

        function downloadIcon(icon, iconIndex, format) {
            const link = document.createElement('a');
            link.href = URL.createObjectURL(format.blob);
            link.download = `icon-${icon.width}x${icon.height}.${format.extension}`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        async function downloadAllIcons() {
            if (state.generatedIcons.length === 0) return;

            showLoading(true);
            loadingDetail.textContent = '–°–æ–∑–¥–∞–Ω–∏–µ ZIP-–∞—Ä—Ö–∏–≤–∞...';

            try {
                const JSZip = window.JSZip;
                if (!JSZip) {
                    // –ï—Å–ª–∏ JSZip –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å–∫–∞—á–∞—Ç—å –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
                    if (confirm('–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è ZIP-–∞—Ä—Ö–∏–≤–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ JSZip. –•–æ—Ç–∏—Ç–µ —Å–∫–∞—á–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏?')) {
                        state.generatedIcons.forEach((icon, index) => {
                            setTimeout(() => downloadIcon(icon, index), index * 100);
                        });
                    }
                    showLoading(false);
                    return;
                }

                const zip = new JSZip();
                const imgFolder = zip.folder('icons');

                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–±–æ—Ä–µ
                const readme = `–ù–∞–±–æ—Ä –∏–∫–æ–Ω–æ–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω –≤ Icon Bundle
–î–∞—Ç–∞: ${new Date().toLocaleDateString()}
–ò—Å—Ö–æ–¥–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: ${state.originalFile.name}
–†–∞–∑–º–µ—Ä—ã: ${state.generatedIcons.map(i => `${i.width}x${i.height}`).join(', ')}
                `;
                zip.file('README.txt', readme);

                // –î–æ–±–∞–≤–ª—è–µ–º –∏–∫–æ–Ω–∫–∏ –≤ –∞—Ä—Ö–∏–≤
                state.generatedIcons.forEach((icon, index) => {
                    imgFolder.file(`icon-${icon.width}x${icon.height}.png`, icon.blob);
                });

                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏ —Å–∫–∞—á–∏–≤–∞–µ–º –∞—Ä—Ö–∏–≤
                const content = await zip.generateAsync({ type: 'blob' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(content);
                link.download = `icon-bundle-${Date.now()}.zip`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è ZIP:', error);
                alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å ZIP-–∞—Ä—Ö–∏–≤. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫–∞—á–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.');
            } finally {
                showLoading(false);
            }
        }

        function showLoading(show) {
            loadingOverlay.style.display = show ? 'flex' : 'none';
            if (!show) {
                loadingDetail.textContent = '';
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ JSZip –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
        function loadJSZip() {
            if (typeof JSZip === 'undefined') {
                const script = document.createElement('script');
                script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
                script.onload = () => console.log('JSZip –∑–∞–≥—Ä—É–∂–µ–Ω');
                document.head.appendChild(script);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            init();
            loadJSZip();

            // –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ PWA —É—Å—Ç–∞–Ω–æ–≤–∫–∏
            let deferredPrompt;
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;

                // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                setTimeout(() => {
                    if (confirm('–•–æ—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Icon Bundle –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?')) {
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then((choiceResult) => {
                            if (choiceResult.outcome === 'accepted') {
                                console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–∏–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ');
                            }
                            deferredPrompt = null;
                        });
                    }
                }, 3000);
            });
        });
    </script>
</body>

</html>